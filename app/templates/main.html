<html>

<head>
    <title>Xen FTP</title>
    <link rel="stylesheet" href="static/main/main.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body id="body">
    <div class="top">
        <div class="top1">
            ASF Cloud Storage
        </div>
        <div class="top2">
            <div class="topbtns">
                <div class="functionbtns">
                    <button id="uploadbtn" class="button">Upload</button>
                </div>
                

            </div>
            <p> Home{{currentfold2.replace("/"," > ")}}</p>
         
        </div>

    </div>

    <div class="middle">
        <div class="middle1">
            <ul>
                <li>Navigation 1</li>
                <li>Navigation 2</li>
            </ul>

        </div>
       
        <div class="middle2">
            
           
              
            <div class="gridbtns">
                <span>Grid size</span>
                <button onclick="setgrid(1)" class="button">1</button>
                <button onclick="setgrid(2)" class="button">2</button>
                <button onclick="setgrid(3)" class="button">3</button>
                <button onclick="setgrid(4)" class="button">4</button>
                <button onclick="setgrid(5)" class="button">5</button>
                <button onclick="setgrid('auto')" class="button">Auto</button>
               
            
        </div>
            <div class="folders foldersall">
            <script>
                filename = []
            </script>
            {% for a in range(0, number_of_files) %}
            <div class="ba" id="ba{{a}}">
                <script>
                    function clicking() {
                        var filename = document.getElementsByClassName("filename")
                        var ba = document.getElementsByClassName('ba')
                        var filetype = document.getElementsByClassName('filetype')

                        for (var i = 0, len = filename.length; i < len; i++) {
                            filename[i].style.color = "#3D3D3D"
                            ba[i].style.background = "white"
                            filetype[i].style.color = "#222222"
                        }
                    }
                    ba = document.getElementById('ba{{a}}');
                    width = document.getElementById("body").offsetWidth
                    ba.addEventListener("click", function () {

                        window.location = '/path?location={{currentfold2+ "/" +filename[a]}}'
                        menu = document.getElementsByClassName('context-menu')[0]
                        menu.style.display = 'none'
                    });



                    ba.addEventListener("mouseover", function (ev) {

                        clicking();
                        ba = document.getElementById('ba{{a}}');
                        filetype = document.getElementById('filetype{{a}}')
                        filename = document.getElementById('filename{{a}}');
                        ba.style.background = '#5d4bea';
                        filetype.style.color = '#f0f0f0';
                        filename.style.color = '#FFFFFF';

                    })
                    ba.addEventListener("mouseout", function (ev) {

                        clicking()

                    })
                    ba.addEventListener("dblclick", function () {
                        window.location = '/path?location={{currentfold2+ "/" +filename[a]}}'
                    })
                    filename.push('{{filename[a]}}')
                    ba.addEventListener('contextmenu', function (ev) {
                        ev.preventDefault();

                        menu.style.display = 'block'
                        menu.style.left = ev.pageX + 'px'
                        menu.style.top = ev.pageY + 'px'
                        filename3 = '{{filename[a]}}'
                        document.getElementById('download_name').value = filename3
                        document.getElementById('download_form').action = '/download/{{filename[a]}}';
                        document.getElementById('download_dir').value = '{{currentfold2}}';


                        return false;
                    }, false);


                </script>


                <a class="link">
                    {% if filetype[a] == "folder" %}
                    <img src="static/images/folder-blue-icon.png" alt="folder icon" class="icon">
                    {%else%}
                    <img src="static/images/file-icon.png" alt="file icon" class="icon">
                    {% endif %}
                    <p class="filename" id="filename{{a}}">{{filename1[a]}}</p>
                    <script>
                        width = document.getElementById("body").offsetWidth
                        if (width < 951) {
                            document.getElementById("filename{{a}}").innerText = "{{filename2[a]}}"
                        }
                    </script>
                    <p class="filetype" id="filetype{{a}}">{{filetype1[a]}}</p>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>


    <div class="menu1" id="menu1">
        <form action="/htmltopython" method="POST">


            <h2 id="menu1h2"></h2>
            <p id="menu1p"></p>
            <span id="menu1text1"></span><input type="text" id="menu1text2" name="menu1text2"><br>
            <div class="btns">
                <p id="menu1btn1">Button 1</p>
                <p id="menu1btn2">Button 2</p>
                <p id="menu1btn3">Button 3</p>
                <p id="menu1btn4">Button 4</p>
                <p id="menu1cancel">Cancel</p>
            </div>
            <input type="text" id="htmltopython" name="htmltopython" style="display: none">
            <input type="text" id="currentdir1" value="{{currentfold2}}" name="currentdir1" style="display: none">
            <input type="submit" id="actionsubmit" style="display: none">


        </form>


    </div>

    <div class="context-menu">
        <div id="context-menu-list">
            <ul>
                <li id="new-folder">New folder</li>
                <li id="uploadbtn2">Upload</li>
                <li id="delete">Delete</li>
                <li id="download-btn">Download</li>
            </ul>

        </div>
    </div>
    </div>
    <div class="hidden">

        <form method="POST" id="download_form">
            <input type="text" value="{{currentfold2}}" name="download_name" id="download_name">
            <input type="text" value="{{currentfold2}}" name="download_dir" id="download_dir">
            <input type="submit" id="download_submit">
        </form>




        <form action="/upload" method="POST" enctype="multipart/form-data" id="upload-form">
            <input id="file-picker" type="file" name="_file" multiple>

            <input type="text" value="{{currentfold2}}" name="currentfold2">
            <input type="submit">
        </form>

    </div>
</body>
<script src="/static/main/main.js">
 


</script>

</html>